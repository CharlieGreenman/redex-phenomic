{"type":"published","id":"bs-dataloader","name":"bs-dataloader","version":"0.3.0","description":"This is a rewrite in reasonml of https://github.com/facebook/dataloader/blob/master/src/index.js","license":"MIT","keywords":["dataloader","bucklescript"],"body":"# bs-dataloader\n\n[![CircleCI](https://circleci.com/gh/ulrikstrid/bs-dataloader.svg?style=svg)](https://circleci.com/gh/ulrikstrid/bs-dataloader)\n\nThis is a rewrite of [dataloader js lib](https://github.com/facebook/dataloader) in reasonml for use with BuckleScript. I have a goal to make it work with native OCaml in the future but I still rely on some JavaScript structures.\n\n## Usage\n\n```re\nmodule UserLoaderImpl = {\n  type value = user;\n  type key = userId;\n  /* The batchLoadFun needs to wrap the returned values in Js.Result.t so that we can reject each promise instead of all */\n  let batchLoadFun userIds => batchGetUsers userIds;\n  let options: options = {batch: true, maxBatchSize: 256, cache: true};\n};\n\nmodule UserLoader = DataLoader.Make UserLoaderImpl;\n\nUserLoader.load \"1\"\n|> Js.Promise.then_ (\n  fun user => displayUser user;\n  Js.Promise.resolve ()\n);\n\n/* elsewhere in your app */\n\nUserLoader.load \"2\"\n|> Js.Promise.then_ (\n  fun user => interactWithUser user;\n  Js.Promsie.resolve()\n);\n```\n\nThe example above will load both users at the same time with 1 request.\nIf we later need one of the loaded users again we will get a cached version of the promise, if you need a new version from the server you can clear the key.\n\n```re\nupdateUser ::userId ::userPatch\n|> Js.Promise.then_ (fun _ => Js.Promise.resolve (UserLoader.clear userId))\n|> Js.Promise.then_ (fun _ => UserLoader.load \"1\")\n|> Js.Promise.then_ (\n  fun user => displayUser user;\n  Js.Promise.resolve ()\n)\n```\n\n## Development\n\n### Build\n```\nnpm run build\n```\n\n### Build + Watch\n\n```\nnpm run watch\n```\n\n### Test\n\n```\nnpm run test\n```\n\n### Editor\nIf you use `vscode`, Press `Windows + Shift + B` it will build automatically","analyzed":"2017-12-13T12:52:38.966Z","updated":"2017-12-13T12:52:38.966Z","stars":17,"score":0.5890353186584185,"quality":0.7398390067121974,"popularity":0.04997848549061599,"maintenance":0.9988318477801248,"homepageUrl":"https://github.com/ulrikstrid/bs-dataloader#readme","repositoryUrl":"https://github.com/ulrikstrid/bs-dataloader","npmUrl":"https://www.npmjs.com/package/bs-dataloader","issuesUrl":"https://github.com/ulrikstrid/bs-dataloader/issues","docsUrl":null}